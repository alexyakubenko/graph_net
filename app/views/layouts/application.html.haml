%html
  %head
    %title GraphNet
    = stylesheet_link_tag 'application', media: :all
    = javascript_include_tag 'application'
    = csrf_meta_tags
  %body
    .navbar.navbar-static-top.navbar-default{ role: :navigation }
      .container
        .navbar-header
          = link_to 'GraphNet', :root, class: 'navbar-brand'
        - if current_user
          %ul.nav.navbar-nav
            %li{ class: "#{ 'active' if request.path == recommendations_path }"}
              = link_to 'Рекоммендации', :recommendations
            %li{ class: "#{ 'active' if request.path == friends_path }"}
              = link_to "Друзья#{ "(#{ current_user.friend_requests.count })" if current_user.friend_requests.any? }", :friends
            %li{ class: "#{ 'active' if request.path =~ /messages/ }"}
              = link_to "Сообщения#{ "(#{ 0 })" if true }", :messages
          %ul.nav.navbar-nav.navbar-right
            %li.dropdown
              = link_to "#", class: 'dropdown-toggle', data: { toggle: :dropdown } do
                = current_user.email
                %b.caret
              %ul.dropdown-menu
                %li= link_to 'Выйти', :logout, method: :post
        - else
          = form_tag :user_sessions, class: ['navbar-form', 'navbar-left'] do
            .form-group
              = email_field_tag :email, '', class: 'form-control', placeholder: 'Email'
            .form-group
              = password_field_tag :password, '', class: 'form-control', placeholder: 'Пароль'
            %button.btn.btn-default{ type: :submit } Войти

    .container
      #flash-messages

      = yield
